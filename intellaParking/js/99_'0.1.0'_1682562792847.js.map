{"version":3,"file":"js/99_'0.1.0'_1682562792847.js","mappings":"6PAEIA,EAAAA,EAAAA,GAAkB,UAAd,aAAS,K,oEADfC,EAAAA,EAAAA,IAWU,gBAVRC,GACAF,EAAAA,EAAAA,GAQO,4BAPLC,EAAAA,EAAAA,IAMEE,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALcC,EAAAC,MAAPC,K,WADTN,EAAAA,EAAAA,IAME,OAJCO,IAAG,0BAA4BD,EAAIE,MACnCC,IAAKH,EAAII,aACTC,IAAKL,EAAII,aACTE,QAAKC,GAAET,EAAAU,eAAeR,I,qFAU/B,GACES,QACE,MAAMC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAIRd,EAAOe,KAAKC,MAAMC,aAAaC,QAAQ,gBAE7CC,eAAeV,EAAeW,GAC5B,IAAIC,EAAaN,KAAKC,MAAMC,aAAaC,QAAQ,eACjD,MAAMI,EAAgBP,KAAKC,MAAMC,aAAaC,QAAQ,kBAEhC,eAAlBI,GACFD,EAAWE,WAAa,GACxBF,EAAWG,SAAW,IAEtBH,EAD2B,cAAlBC,EACI,CACXC,WAAYF,EAAWE,YAGZ,CACXC,SAAUH,EAAWG,UAIzB,MAAMvB,EAAMD,EAAKyB,QACdxB,GAAQA,EAAII,eAAiBe,EAAQf,eAElCqB,EAAeX,KAAKC,MACxBC,aAAaC,QAAQ,gBACrBQ,aAEF,GAAIzB,EAAI0B,OAAS,EACf,OAGF,MAAMC,QAAYf,EAAMgB,SAAS,oBAAqB,IACjDR,KACApB,EAAI,GACPyB,iBAQF,GANAI,QAAQC,IAAI,IACPV,KACApB,EAAI,GACPyB,iBAGkB,SAAhBE,EAAII,QACN,OAAOrB,EAAOsB,KAAM,kBAGlBL,EAAIM,OAAOC,WAAWR,OAAS,GACjCV,aAAamB,QAAQ,aAAcrB,KAAKsB,UAAUT,IAClDjB,EAAOsB,KAAM,qBAAoBhC,EAAI,GAAGI,iBAExCM,EAAOsB,KAAM,MAAKP,IAEtB,CAEA,MAAO,CACL1B,OACAsC,OAAM,EACN7B,iBAEJ,G,QC7EF,MAAM8B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://intella_parking/./src/views/steps/CarSelectPage.vue","webpack://intella_parking/./src/views/steps/CarSelectPage.vue?e1e6"],"sourcesContent":["<template>\r\n  <section>\r\n    <h1>請點選您的車牌照片</h1>\r\n    <main>\r\n      <img\r\n        v-for=\"car in cars\"\r\n        :src=\"`data:image/jpeg;base64,${car.img}`\"\r\n        :alt=\"car.licensePlate\"\r\n        :key=\"car.licensePlate\"\r\n        @click=\"goCheckoutPage(car)\"\r\n      />\r\n    </main>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport carImg from \"../../assets/C51589.jpg\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  setup() {\r\n    const router = useRouter();\r\n    const store = useStore();\r\n\r\n    // 先從local取得所有車\r\n\r\n    const cars = JSON.parse(localStorage.getItem(\"allCarsInfo\"));\r\n\r\n    async function goCheckoutPage(carInfo) {\r\n      let clientInfo = JSON.parse(localStorage.getItem(\"clientInfo\"));\r\n      const activeInvoice = JSON.parse(localStorage.getItem(\"activeInvoice\"));\r\n\r\n      if (activeInvoice === \"memberCode\") {\r\n        clientInfo.carrierNum = \"\";\r\n        clientInfo.loveCode = \"\";\r\n      } else if (activeInvoice === \"phoneCode\") {\r\n        clientInfo = {\r\n          carrierNum: clientInfo.carrierNum,\r\n        };\r\n      } else {\r\n        clientInfo = {\r\n          loveCode: clientInfo.loveCode,\r\n        };\r\n      }\r\n\r\n      const car = cars.filter(\r\n        (car) => car.licensePlate === carInfo.licensePlate\r\n      );\r\n      const parkingToken = JSON.parse(\r\n        localStorage.getItem(\"parkingInfo\")\r\n      ).parkingToken;\r\n\r\n      if (car.length < 1) {\r\n        return;\r\n      }\r\n\r\n      const res = await store.dispatch(\"getCheckoutQrCode\", {\r\n        ...clientInfo,\r\n        ...car[0],\r\n        parkingToken,\r\n      });\r\n      console.log({\r\n        ...clientInfo,\r\n        ...car[0],\r\n        parkingToken,\r\n      });\r\n\r\n      if (res.message === \"2222\") {\r\n        return router.push(`/p/freePayment`);\r\n      }\r\n\r\n      if (res.result.paymentUrl.length > 0) {\r\n        localStorage.setItem(\"paymentUrl\", JSON.stringify(res));\r\n        router.push(`/p/steps/checkout/${car[0].licensePlate}`);\r\n      } else {\r\n        router.push(`/p/${parkingToken}`);\r\n      }\r\n    }\r\n\r\n    return {\r\n      cars,\r\n      carImg,\r\n      goCheckoutPage,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\nh1 {\r\n  text-align: center;\r\n  font-size: var(--f-l);\r\n  letter-spacing: 1px;\r\n  margin: 1em 0;\r\n}\r\nmain {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 4em;\r\n\r\n  img {\r\n    margin: 0 auto;\r\n    max-width: 500px;\r\n    width: 80%;\r\n    object-fit: cover;\r\n    border-radius: 20px;\r\n    box-shadow: var(--shadow-1);\r\n    cursor: pointer;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./CarSelectPage.vue?vue&type=template&id=5ae27ce7&scoped=true\"\nimport script from \"./CarSelectPage.vue?vue&type=script&lang=js\"\nexport * from \"./CarSelectPage.vue?vue&type=script&lang=js\"\n\nimport \"./CarSelectPage.vue?vue&type=style&index=0&id=5ae27ce7&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Desktop\\\\intella_parking\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5ae27ce7\"]])\n\nexport default __exports__"],"names":["_createElementVNode","_createElementBlock","_hoisted_1","_Fragment","_renderList","$setup","cars","car","src","img","alt","licensePlate","key","onClick","$event","goCheckoutPage","setup","router","useRouter","store","useStore","JSON","parse","localStorage","getItem","async","carInfo","clientInfo","activeInvoice","carrierNum","loveCode","filter","parkingToken","length","res","dispatch","console","log","message","push","result","paymentUrl","setItem","stringify","carImg","__exports__","render"],"sourceRoot":""}