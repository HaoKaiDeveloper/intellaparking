{"version":3,"file":"js/819_'0.1.0'_1686031009191.js","mappings":"uQAEUA,MAAM,W,GAEFA,MAAM,Q,UAGZC,EAAAA,EAAAA,GAAW,SAAR,QAAI,K,UACPA,EAAAA,EAAAA,GAAkB,SAAf,eAAW,K,GAEbD,MAAM,O,UAAgCC,EAAAA,EAAAA,GAAiB,YAAX,QAAI,K,UAGjDA,EAAAA,EAAAA,GAAmB,cAAX,MAAE,K,SAIRD,MAAM,Q,GAEFA,MAAM,Q,UAGZC,EAAAA,EAAAA,GAAW,SAAR,QAAI,K,UACPA,EAAAA,EAAAA,GAAY,SAAT,SAAK,K,6FAtBdC,EAAAA,EAAAA,IAyBU,gBAxBoBC,EAAAC,SAAM,WAAlCF,EAAAA,EAAAA,IAaO,OAbPG,EAaO,EAZLJ,EAAAA,EAAAA,GAMM,aALJA,EAAAA,EAAAA,GAEO,OAFPK,EAEO,EADLC,EAAAA,EAAAA,IAAiCC,EAAA,CAA3BC,KAAK,wBAEbC,EACAC,KAEFV,EAAAA,EAAAA,GAA8D,IAA9DW,EAA8D,UAA/C,MAAEC,EAAAA,EAAAA,IAAGV,EAAAW,cAAe,SAAM,GAAAC,KAEzCR,EAAAA,EAAAA,IAEcS,EAAA,CAFAC,GAAE,MAAQd,EAAAe,aAAaC,QAAUC,QAAOjB,EAAAkB,Y,mBACpD,IAAmB,CAAnBC,K,yCAIJpB,EAAAA,EAAAA,IAQO,OARPqB,EAQO,EAPLtB,EAAAA,EAAAA,GAMM,aALJA,EAAAA,EAAAA,GAEO,OAFPuB,EAEO,EADLjB,EAAAA,EAAAA,IAAuCC,EAAA,CAAjCC,KAAK,8BAEbgB,EACAC,Q,iCAUR,GACEC,QACE,MAAMvB,GAASwB,EAAAA,EAAAA,KAAI,GACbd,GAAec,EAAAA,EAAAA,IAAI,MACnBC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MACRC,EAAaN,EAAMO,MAAMC,QACzBnB,GAAeU,EAAAA,EAAAA,IAAI,IACzB,IAAIU,EAAcC,aAAaC,QAAQ,eAQvCC,eAAeC,IACb,GAAIP,EAAWQ,OAAS,IAAMR,EAE5B,YADAJ,EAAOa,QAAS,MAAK1B,EAAaC,SAGpC,MAAM0B,QAAYZ,EAAMa,SAAS,sBAAuBX,GACxDY,QAAQC,IAAIH,GACO,SAAfA,EAAII,QACN7C,EAAOe,OAAQ,EACfL,EAAaK,MAAQ0B,EAAIzC,OAAO8C,gBAEhC9C,EAAOe,OAAQ,EACfgC,YAAW,KACT9B,GAAY,GACX,KAEP,CAEA,SAASA,IACPkB,aAAaa,WAAW,eACxBb,aAAaa,WAAW,cACxBb,aAAaa,WAAW,mBACxBrB,EAAOa,QAAS,MAAK1B,EAAaC,QACpC,CAEA,OA/BImB,IACFA,EAAce,KAAKC,MAAMhB,GACzBpB,EAAaC,MAAQmB,EAAYpB,cAGnCwB,IA0BO,CACLtC,SACAU,eACAO,aACAH,eAEJ,G,QC1EF,MAAMqC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://intella_parking/./src/views/PaymentResult.vue","webpack://intella_parking/./src/views/PaymentResult.vue?b305"],"sourcesContent":["<template>\r\n  <section>\r\n    <main class=\"success\" v-if=\"result\">\r\n      <div>\r\n        <span class=\"icon\">\r\n          <icon icon=\"fa-solid fa-check\" />\r\n        </span>\r\n        <p>付款成功</p>\r\n        <p>發票將寄送至您指定工具</p>\r\n      </div>\r\n      <p class=\"msg\">請於{{ leavaLimTime }}分鐘內離場 <span>謝謝使用</span></p>\r\n\r\n      <router-link :to=\"`/p/${parkingToken.value}`\" @click=\"goHomePage\">\r\n        <button>確認</button>\r\n      </router-link>\r\n    </main>\r\n\r\n    <main class=\"fail\" v-else>\r\n      <div>\r\n        <span class=\"icon\">\r\n          <icon icon=\"fa-solid fa-exclamation\" />\r\n        </span>\r\n        <p>付款失敗</p>\r\n        <p>將回到首頁</p>\r\n      </div>\r\n    </main>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  setup() {\r\n    const result = ref(true);\r\n    const leavaLimTime = ref(\"15\");\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const store = useStore();\r\n    const paymentVal = route.query.payment;\r\n    const parkingToken = ref(\"\");\r\n    let parkingInfo = localStorage.getItem(\"parkingInfo\");\r\n\r\n    if (parkingInfo) {\r\n      parkingInfo = JSON.parse(parkingInfo);\r\n      parkingToken.value = parkingInfo.parkingToken;\r\n    }\r\n\r\n    checkOrderPayment();\r\n    async function checkOrderPayment() {\r\n      if (paymentVal.length < 1 || !paymentVal) {\r\n        router.replace(`/p/${parkingToken.value}`);\r\n        return;\r\n      }\r\n      const res = await store.dispatch(\"checkPaymentSuccess\", paymentVal);\r\n      console.log(res);\r\n      if (res.status === \"0000\") {\r\n        result.value = true;\r\n        leavaLimTime.value = res.result.leaveLimtTime;\r\n      } else {\r\n        result.value = false;\r\n        setTimeout(() => {\r\n          goHomePage();\r\n        }, 10000);\r\n      }\r\n    }\r\n\r\n    function goHomePage() {\r\n      localStorage.removeItem(\"allCarsInfo\");\r\n      localStorage.removeItem(\"paymentUrl\");\r\n      localStorage.removeItem(\"activeInvoice  \");\r\n      router.replace(`/p/${parkingToken.value}`);\r\n    }\r\n\r\n    return {\r\n      result,\r\n      leavaLimTime,\r\n      goHomePage,\r\n      parkingToken,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\nsection {\r\n  padding-top: 3em;\r\n}\r\nmain {\r\n  width: 70%;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  div {\r\n    display: flex;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    gap: 0.5em;\r\n    border: none;\r\n    box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);\r\n    padding: 3.3em 2em;\r\n    border-radius: 10px;\r\n    margin-bottom: 2em;\r\n  }\r\n  p:nth-child(2) {\r\n    font-size: 3rem;\r\n  }\r\n  p:nth-child(3) {\r\n    font-size: 2.5rem;\r\n  }\r\n\r\n  .msg {\r\n    span {\r\n      display: block;\r\n    }\r\n  }\r\n  a {\r\n    margin-top: 1.5em;\r\n    display: block;\r\n    text-align: center;\r\n    button {\r\n      font-size: 2.3rem;\r\n      font-weight: 600;\r\n      color: var(--grey-4);\r\n      padding: 0.8em 1.8em;\r\n      border-radius: 10px;\r\n\r\n      background-color: var(--yellow-1);\r\n      &:hover,\r\n      &:active {\r\n        background-color: var(--yellow-2);\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n.icon {\r\n  width: 6rem;\r\n  height: 6rem;\r\n  border-radius: 50%;\r\n  background-color: var(--yellow-2);\r\n  font-size: 4rem;\r\n  margin-bottom: 0.7em;\r\n  color: var(--grey-4);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.fail .icon {\r\n  background-color: red;\r\n}\r\n</style>\r\n","import { render } from \"./PaymentResult.vue?vue&type=template&id=39ae43e0&scoped=true\"\nimport script from \"./PaymentResult.vue?vue&type=script&lang=js\"\nexport * from \"./PaymentResult.vue?vue&type=script&lang=js\"\n\nimport \"./PaymentResult.vue?vue&type=style&index=0&id=39ae43e0&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\USER\\\\Desktop\\\\intella_parking\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39ae43e0\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","$setup","result","_hoisted_1","_hoisted_2","_createVNode","_component_icon","icon","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","leavaLimTime","_hoisted_6","_component_router_link","to","parkingToken","value","onClick","goHomePage","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","setup","ref","route","useRoute","router","useRouter","store","useStore","paymentVal","query","payment","parkingInfo","localStorage","getItem","async","checkOrderPayment","length","replace","res","dispatch","console","log","status","leaveLimtTime","setTimeout","removeItem","JSON","parse","__exports__","render"],"sourceRoot":""}